<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Investment Calculator (Decreasing Contributions + Withdrawals with Inflation & Tax)</title>
<link rel="stylesheet" href="style.css">

</head>
<body>

<h2>Investment Calculator (Decreasing Contributions + Withdrawals with Inflation & Tax)</h2>

<div class="main-container">
  <div class="form-wrapper">
    <div class="form-container">
      <label>Initial Investment:
        <div>
          <input type="number" id="initial" value="0">
          <input type="range" id="initialSlider" min="0" max="10000" step="10" value="0">
        </div>
      </label>

      <label>
        <div>Annual Interest Rate (%)
          <span class="tooltip" tabindex="0">?
            <span class="tooltip-text">
              Common averages:<br>
              • S&P 500 ETF: ~8%<br>
              • Govt Bonds: ~4%<br>
              • Corp Bonds: ~5–7%<br>
              • Deposits/CDs: ~3–5%<br>
              • REITs: ~6–9%
            </span>
          </span>
        </div>
        <div>
          <input type="number" id="rate" value="7" step="0.1">
          <input type="range" id="rateSlider" min="0" max="20" step="0.1" value="7">
        </div>
      </label>

      <label>Number of Years:
        <div>
          <input type="number" id="years" value="50" step="1">
          <input type="range" id="yearsSlider" min="1" max="100" step="1" value="50">
        </div>
      </label>

      <label>Starting Annual Contribution:
        <div>
          <input type="number" id="contribution" value="18000" step="10" min="0" max="100000">
          <input type="range" id="contributionSlider" min="0" max="100000" step="10" value="18000">
        </div>
      </label>

      <label class="label-for-radio">Contribution Decrease Type:
        <div class="radio-group-horizontal">
          <input type="radio" id="decreaseFixed" name="decreaseType" value="fixed" checked>
          <label for="decreaseFixed">Fixed Amount</label>
          <input type="radio" id="decreasePercent" name="decreaseType" value="percent">
          <label for="decreasePercent">Percentage</label>
        </div>
      </label>

      <label>Decrease Value:
        <div>
          <input type="number" id="decreaseValue" value="1500" step="10">
          <input type="range" id="decreaseValueSlider" min="0" max="5000" step="10" value="1500">
        </div>
      </label>

      <label>Contribution Limit Years (leave blank for no limit):
        <div>
          <input type="number" id="contributionLimit" placeholder="" step="1">
          <input type="range" id="contributionLimitSlider" min="0" max="100" step="1" value="0">
        </div>
      </label>

      <label class="label-for-radio">Compounding Frequency:
        <div class="radio-group-vertical">
          <input type="radio" id="freqYearly" name="frequency" value="1" checked>
          <label for="freqYearly">Yearly</label>
          <input type="radio" id="freqMonthly" name="frequency" value="12">
          <label for="freqMonthly">Monthly</label>
        </div>
      </label>

      <hr>

      <label>Monthly Withdrawal (after start year) - Net (after tax):
        <div>
          <input type="number" id="monthlyWithdrawal" value="1000" step="10">
          <input type="range" id="monthlyWithdrawalSlider" min="0" max="10000" step="10" value="1000">
        </div>
      </label>

      <label>Investment Tax (%):
        <div>
          <input type="number" id="taxRate" value="0" step="0.1">
          <input type="range" id="taxRateSlider" min="0" max="100" step="1" value="23">
        </div>
      </label>

      <label>Withdrawals Start After Year:
        <div>
          <input type="number" id="withdrawStartYear" value="20" step="1">
          <input type="range" id="withdrawStartYearSlider" min="1" max="100" step="1" value="20">
        </div>
      </label>

      <label>Withdrawal Inflation Rate (% per year):
        <div>
          <input type="number" id="withdrawInflation" value="3" step="0.1">
          <input type="range" id="withdrawInflationSlider" min="0" max="10" step="0.1" value="3">
        </div>
      </label>

      <button onclick="triggerCalculation()">Calculate</button>
      <button id="aiExplainButton" disabled>AI Explain</button>
    </div>
    <div id="ai-explanation" class="ai-explanation-container"></div>
  </div>
  <div class="results-wrapper">
    <div id="results-container" style="position: relative;">
      <div id="spinner" class="spinner" style="display: none;"></div>
      <div id="results"></div>
    </div>
  </div>
</div>

<div id="apiKeyModal" class="modal">
  <div class="modal-content">
    <span class="close-button">&times;</span>
    <h3>Enter API Key</h3>
    <p>To use the AI Explain feature, you need to provide your own Google Gemini API key.</p>
    <div class="modal-instructions">
      <strong>How to get your Google AI API Key:</strong>
      <ol>
        <li>Go to <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a>.</li>
        <li>Sign in with your Google account.</li>
        <li>Click on <strong>"Get API key"</strong> (usually in the top-left).</li>
        <li>Click <strong>"Create API key in new project"</strong>.</li>
        <li>Copy the generated key.</li>
      </ol>
    </div>
    <input type="password" id="apiKeyInput" placeholder="Paste your API key here">
    <button id="saveApiKeyButton">Save and Continue</button>
  </div>
</div>

<script src="script.js"></script>

</body>
</html>
